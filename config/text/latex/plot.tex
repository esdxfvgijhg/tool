\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{etex}  %% pour regler conflits tikz et pgfplot
\usepackage{bigstrut}
\usepackage{mathtools}
\usepackage{eso-pic}
\usepackage{stmaryrd}
\usepackage{\LIBPATH/styles/gantt}
\usepackage{lscape}
\usepackage{etoolbox}
\usepackage{textcomp}
\usepackage{bbding}
\usepackage[makeroom]{cancel}
\usepackage{makecell}
\usepackage{amssymb}
\usepackage{nicefrac}
\usepackage{pgfplotstable}
\usepackage{wasysym}
\usepackage{filecontents}
\usepackage{pdfpages}
\usepackage{rotating}
\usepackage{tkz-graph}

% %\usepackage{aobs-tikz}  %- TikZ styles for creating overlaid pictures in beamer.
% %\usepackage{battleship}  %- A style file for typesetting Battleship logic puzzles.
% \usepackage{binarytree}  %- Drawing binary trees using TikZ.
% \usepackage{blochsphere}  %- Draw pseudo-3D diagrams of Bloch spheres.
% \usepackage{bloques}  %- Generate control diagrams.
% \usepackage{blox}  %- Draw block diagrams, using TikZ.
% \usepackage{bodegraph}  %- Draw Bode, Nyquist and Black plots with gnuplot and TikZ.
% \usepackage{braids}  %- Draw braid diagrams with PGF/TikZ.
% %\usepackage{celtic}  %- A TikZ library for drawing celtic knots.
% \usepackage{circuitikz}  %- Draw electrical networks with TikZ.
% \usepackage{fast-diagram}  %- Easy generation of FAST diagrams.
% \usepackage{flowchart}  %- Shapes for drawing flowcharts, using TikZ.
% \usepackage{forest}  %- Drawing (linguistic) trees.
% \usepackage{grafcet}  %- Draw Grafcet/SFC with TikZ.
% \usepackage{graph35 %– Draw keys and screen items of several Casio calculators.
% \usepackage{harveyballs}  %- Create Harvey Balls using TikZ.
% \usepackage{hf-tikz}  %- A simple way to highlight formulas and formula parts.
% \usepackage{hobby}  %- An implementation of Hobby’s algorithm for PGF/TikZ.
% \usepackage{karnaugh-map}  %- LATEX package for drawing karnaugh maps with up to 6 variables.
% \usepackage{karnaughmap}  %- Typeset Karnaugh maps.
% \usepackage{logicpuzzle}  %- Typeset (grid-based) logic puzzles.
% \usepackage{makeshape}  %- Declare new PGF shapes.
% \usepackage{neuralnetwork}  %- Graph-drawing for neural networks.
% \usepackage{pixelart}  %- A package to draw pixel-art pictures.
% \usepackage{pgf-blur}  %- PGF/TikZ package for "blurred" shadows.
%\usepackage{\LIBPATH/styles/pgf-pie}  %- Draw pie charts, using PGF.
% \usepackage{pgf-soroban}  %- Create images of the soroban using TikZ/PGF.
% \usepackage{pgf-spectra}  %- Draw continuous or discrete spectra using PGF/TikZ.
% \usepackage{pgf-umlcd}  %- Some LATEX macros for UML Class Diagrams.
% \usepackage{pgf-umlsd}  %- Draw UML Sequence Diagrams.
% \usepackage{pgfgantt}  %- Draw Gantt charts with TikZ.
% \usepackage{pgfplots}  %- Loads, rounds, formats and postprocesses numerical tables.
% \usepackage{prooftrees}  %- Forest-based proof trees (symbolic logic).
% \usepackage{pxpgfmark}  %- e-pTEX driver for PGF inter-picture connections.
% \usepackage{reotex}  %- Draw Reo Channels and Circuits.
% \usepackage{rulercompass}  %- A TikZ library for straight-edge and compass diagrams.
% \usepackage{sa-tikz}  %- TikZ library to draw switching architectures.
% \usepackage{schemabloc}  %- Draw block diagrams, using TikZ.
% \usepackage{scsnowman}  %- Snowman variants using TikZ.
% \usepackage{setdeck}  %- Typeset cards for Set.
% \usepackage{smartdiagram}  %- Generate diagrams from lists.
% \usepackage{spath3}  %- Manipulate “soft paths” in PGF.
% \usepackage{stanli}  %- TikZ Library for Structural Analysis.
% \usepackage{ticollege}  %- Graphical representation of keys on a standard scientific calculator.
% \usepackage{tikz-3dplot}  %- Coordinate transformation styles for 3d plotting in TikZ.
% \usepackage{tikz-bayesnet}  %- Draw Bayesian networks, graphical models and directed factor graphs.
% \usepackage{tikz-cd}  %- Create commutative diagrams with TikZ.
% \usepackage{tikz-dependency}  %- A library for drawing dependency graphs.
% \usepackage{tikz-dimline}  %- Technical dimension lines using PGF/TikZ.
% \usepackage{tikz-feynman}  %- Feynman diagrams with TikZ.
% \usepackage{tikz-inet}  %- Draw interaction nets with TikZ.
% \usepackage{tikz-opm}  %- Typeset OPM diagrams.
% \usepackage{tikz-optics}  %- A library for drawing optical setups with TikZ.
% \usepackage{tikz-page}  %- Small macro to help building nice and complex layout materials.
% \usepackage{tikz-palattice}  %- Draw particle accelerator lattices with TikZ.
% \usepackage{tikz-qtree}  %- Use existing qtree syntax for trees in TikZ.
% \usepackage{tikz-timing}  %- Easy generation of timing diagrams as TikZ pictures.
% \usepackage{tikzinclude}  %- Import TikZ images from colletions.
% \usepackage{tikzmark}  %- Use TikZ's method of remembering a position on a page.
% \usepackage{tikzorbital}  %- Atomic and molecular orbitals using TikZ.
% \usepackage{tikzpagenodes}  %- A single TikZ node for the whole page.
% \usepackage{tikzpeople}  %- Draw people-shaped nodes in TikZ.
% \usepackage{tikzpfeile}  %- Draw arrows using PGF/TikZ.
% \usepackage{tikzposter}  %- Create scientific posters using TikZ.
% \usepackage{tikzscale}  %- Resize pictures while respecting text size.
% \usepackage{tikzsymbols}  %- Some symbols created using TikZ.
% \usepackage{timing-diagrams}  %- Draw timing diagrams.
% \usepackage{tipfr}  %- Produces calculator's keys with the help of TikZ.
% \usepackage{tkz-berge}  %- Macros for drawing graphs of graph theory.
% \usepackage{tkz-orm}  %- Create Object-Role Model (ORM) diagrams.
% \usepackage{xebaposter}  %- Create beautiful scientific Persian/Latin posters using TikZ.


% Packages %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \mode<presentation>{}
% \usepackage[tel={60~00},fax={60~00},lab={LSL}]{styles/beamerthemeCeaList2012Red}
% \usepackage{bookmark}
% \usepackage{fdsymbol}
% \usepackage{lmodern} 
% \usepackage[upright]{fourier}
% \usepackage{ae,aecompl}         % Utilisation des fontes vectorielles modernes
% \usepackage{amsmath}            % Permet de taper des formules mathématiques
% \usepackage{amssymb}            % Permet d'utiliser des symboles mathématiques
% \usepackage{amsfonts}           % Permet d'utiliser des polices mathématiques
% \usepackage{stmaryrd}
% \usepackage{nicefrac}           % Fractions 'inline'
% \usepackage[version=3]{mhchem}  % Equations chimiques
% \usepackage{arevmath}           % For math symbols
% \usepackage{xcolor,color, colortbl}
% \usepackage{pifont}
% \usepackage{eso-pic}
% \usepackage{anyfontsize}
% \usepackage{placeins}
% \usepackage{textcomp}
% \usepackage{hyphenat}
% \usepackage{import}
% \usepackage{pdfpages} 
% \usepackage{wrapfig}
% \usepackage{float}
% \usepackage{etoolbox}
% \usepackage{adjustbox}
% \usepackage{siunitx}
% \usepackage{url}
% \usepackage{lscape,lipsum}
% \usepackage{everypage}
% \usepackage{eurosym}

\newcommand\firstpage{}
\newcommand\preface{}
\newcommand\body{}
\newcommand\Appendix{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% nonooo \usetikzlibrary{shadows}
% nonooo \usetikzlibrary{positioning-plus,node-families}
% nonooo \usetikzlibrary{fadings}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% usetikzlibrary

\usetikzlibrary{mindmap,trees}
\usetikzlibrary{calc}
\usetikzlibrary{3d}
\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{snakes}
\usetikzlibrary{backgrounds}
\usetikzlibrary{datavisualization}
\usetikzlibrary{patterns}
\usetikzlibrary{matrix}
\usetikzlibrary{shapes}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{shapes.arrows}
\usetikzlibrary{fit}
\usetikzlibrary{plotmarks}
\usetikzlibrary{positioning}
\usetikzlibrary{decorations}
\usetikzlibrary{decorations.text}
\usetikzlibrary{decorations.pathreplacing}

\usetikzlibrary{hobby}
\usetikzlibrary{automata}
\usetikzlibrary{graphs, graphs.standard, graphdrawing}

\usepgfplotslibrary{groupplots}
\usepgfplotslibrary{patchplots}


% PGF %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{%
	compat=1.7,
	width=7cm,
	compat=1.3,
	every linear axis/.append style={
		/pgf/number format/.cd,
		use comma,
		1000 sep={\,},
	},
	compat=newest,
	table/search path={\DATAPATH}
}

% TIKZSET -----------------------------------------------------------------
\tikzstyle{every picture}+=[remember picture]
\tikzstyle{chart}=[
    legend label/.style={font={\scriptsize},anchor=west,align=left},
    legend box/.style={rectangle, draw, minimum size=5pt},
    axis/.style={black,semithick,->},
    axis label/.style={anchor=east,font={\tiny}},
]
\tikzstyle{bar chart}=[
    chart,
    bar width/.code={
        \pgfmathparse{##1/2}
        \global\let\bar@w\pgfmathresult
    },
    bar/.style={very thick, draw=white},
    bar label/.style={font={\bf\small},anchor=north},
    bar value/.style={font={\footnotesize}},
    bar width=.75,
]
\tikzstyle{pie chart}=[
    chart,
    slice/.style={line cap=round, line join=round, very thick,draw=white},
    pie title/.style={font={\bf}},
    slice type/.style 2 args={
        ##1/.style={fill=##2},
        values of ##1/.style={}
    }
]

\input{\LIBPATH/tikzset}

\tikzset{%
	every picture/.style={execute at begin picture={}}%\shorthandoff{:;!?};%
	/mygrid/step line/.style={line width=0.80pt,draw=gray!80},%
	/mygrid/steplet line/.style={line width=0.25pt,draw=gray!80}%
}

\pgfkeys{/mygrid/.cd,
	step/.store in=\mygrid@step,
	steplet/.store in=\mygrid@steplet,
	coordinates/.is if=mygrid@coordinates,
%	/mygrid/.cd,coordinates=true,step=1,steplet=0.2,#1%
}

% NEWENVIRONMENT -----------------------------------------------------------
\newenvironment{textBox}[1]{%
  \def\title{#1}%
  \begin{tikzpicture}
    \node [boxStyle] (box)
    \bgroup\minipage{0.5\textwidth}%
}{
    \endminipage%
    \egroup;
%    \node[boxTitleStyle] at (box.north east) {\title};
  \end{tikzpicture}%
}
\newenvironment{whiteblock} {
  \setbeamertemplate{blocks}[rounded]
  \setbeamercolor{block title}{fg=white,bg=black!85!black}
  \setbeamercolor{block body}{fg=black,bg=white}
  \begin{block}
  }{\end{block}}
\newenvironment{greenblock} {
  \setbeamertemplate{blocks}[rounded][shadow=true]
  \setbeamercolor{block title}{fg=white,bg=green!85!black}
  \setbeamercolor{block body}{fg=black,bg=green!30!white}
  \begin{block}
  }{\end{block}}
\newenvironment{orangeblock} {
  \setbeamertemplate{blocks}[rounded][shadow=true]
  \setbeamercolor{block title}{fg=white,bg=orange!85!black}
  \setbeamercolor{block body}{fg=black,bg=orange!30!white}
  \begin{block}
  }{\end{block}}
\newenvironment{blueblock} {
  \setbeamertemplate{blocks}[rounded][shadow=true]
  \setbeamercolor{block title}{fg=white,bg=blue!85!black}
  \setbeamercolor{block body}{fg=black,bg=blue!30!white}
  \begin{block}
  }{\end{block}}
\newenvironment{redblock} {
  \setbeamertemplate{blocks}[rounded][shadow=true]
  \setbeamercolor{block title}{fg=white,bg=red!85!black}
  \setbeamercolor{block body}{fg=black,bg=red!30!white}
  \begin{block}
  }{\end{block}}
\newenvironment{grayblock} {
  \setbeamertemplate{blocks}[rounded][shadow=true]
  \setbeamercolor{block title}{fg=white,bg=black!85!white}
  \setbeamercolor{block body}{fg=black,bg=black!30!white}
  \begin{block}
  }{\end{block}}
\newenvironment{changemargin}[2]{%
  \begin{list}{}{%
      \setlength{\topsep}{0pt}%
      \setlength{\leftmargin}{#1}%
      \setlength{\rightmargin}{#2}%
      \setlength{\listparindent}{\parindent}%
      \setlength{\itemindent}{\parindent}%
      \setlength{\parsep}{\parskip}%
    }%
  \item[]}{\end{list}}


% NEW COMMAND ----------------------------------------------------------
\newcommand\Input[1]{
	\input{\PLOTPATH/#1}
}

\newcommand{\Node}[4]{
  node[#1] (#2) {#3} [#4]
}
\newcommand{\Child}[2]{
  child[#1] {#2}
}
\newcommand{\itab}[1]{\hspace{0em}\rlap{#1}}
\newcommand{\tab}[1]{\hspace{.09\textwidth}\rlap{#1}}
\newcommand*{\info}[4][16.3]{%
  \node [ annotation, #3, scale=0.65, text width = #1em,
          inner sep = 2mm ] at (#2) {%
  \list{$\bullet$}{\topsep=0pt\itemsep=0pt\parsep=0pt
    \parskip=0pt\labelwidth=8pt\leftmargin=8pt
    \itemindent=0pt\labelsep=2pt}%
    #4
  \endlist
  };
}

\makeatletter
\newcommand{\mywhiteblackbox}[1]{
  \setbox0=\hbox{#1}
  \setlength{\@tempdima}{\dimexpr\wd0+13pt}
  \begin{tcolorbox}[
    colback=white,
    colframe=black,
    boxrule=0.5pt,
    arc=4pt,
    left=6pt,
    right=6pt,
    top=6pt,
    bottom=6pt,
    boxsep=0pt,
    width=\@tempdima]
    #1
  \end{tcolorbox}
}
\newcommand{\mybluebox}[1]{
  \setbox0=\hbox{#1}
  \setlength{\@tempdima}{\dimexpr\wd0+13pt}
  \begin{tcolorbox}[
    colback=blue!30!white,
    colframe=black!25!white,
    boxrule=0.5pt,
    arc=4pt,
    left=6pt,
    right=6pt,
    top=6pt,
    bottom=6pt,
    boxsep=0pt,
    width=\@tempdima]
    #1
  \end{tcolorbox}
}
\newcommand{\myorangebox}[1]{
  \setbox0=\hbox{#1}
  \setlength{\@tempdima}{\dimexpr\wd0+13pt}
  \begin{tcolorbox}[
    colback=orange!30!white,
    colframe=black!25!white,
    boxrule=0.5pt,
    arc=4pt,
    left=6pt,
    right=6pt,
    top=6pt,
    bottom=6pt,
    boxsep=0pt,
    width=\@tempdima]
    #1
  \end{tcolorbox}
}
\newcommand{\mygreenbox}[1]{
  \setbox0=\hbox{#1}
  \setlength{\@tempdima}{\dimexpr\wd0+13pt}
  \begin{tcolorbox}[
    colback=green!40!white,
    colframe=black!25!white,
    boxrule=0.5pt,
    arc=4pt,
    left=6pt,
    right=1pt,
    top=6pt,
    bottom=6pt,
    boxsep=0pt,
    width=\@tempdima]
    #1
  \end{tcolorbox}
}
\newcommand{\myredbox}[1]{
  \setbox0=\hbox{#1}
  \setlength{\@tempdima}{\dimexpr\wd0+13pt}
  \begin{tcolorbox}[
    colback=red!40!white,
    colframe=black!25!white,
    boxrule=0.5pt,
    arc=4pt,
    left=6pt,
    right=1pt,
    top=6pt,
    bottom=6pt,
    boxsep=0pt,
    width=\@tempdima]
    #1
  \end{tcolorbox}
}
\newcommand{\placetextbox}[3]{
  % \placetextbox{<horizontal pos>}{<vertical pos>}{<stuff>}
  \AddToShipoutPictureFG*{
    \put(\LenToUnit{#1\paperwidth},\LenToUnit{#2\paperheight})
    {\vtop{{\null}\makebox[0pt][c]{#3}}}%
  }
}
\newcommand{\bubblethis}[2]{
  \tikz[remember picture,baseline]{\node[anchor=base,inner sep=0,outer sep=0]%
    (#1) {\underline{#1}};\node[overlay,cloud callout,callout relative
    pointer={(0.2cm,-0.7cm)},%
    aspect=2.5,fill=yellow!90] at ($(#1.north)+(-0.5cm,1.6cm)$) {#2};}%
}%
\makeatother

\newcommand{\monbleu}[1]{{\color{blue}{#1}}}
\newcommand{\rouge}[1]{{\color{red}{#1}}}
\newcommand{\mygray}[1]{\textcolor{mongris}{#1}}
\newcommand{\citat}[1]{{\tiny{\color{green!40!black}{[#1]}}}}
\newcommand{\mynote}[1]{{\scriptsize{\color{red!40!black}{[#1]}}}}
\newcommand{\vundef}{{\color{red}{\bot_V}}}
\newcommand{\vblackundef}{{\bot_V}}
\newcommand{\condundef}{{\color{red}{(U)}}}
\newcommand{\yundefined}{{\color{red}{(U)}}}
\newcommand{\outofmem}{{\color{red}{out of mem}}}
\newcommand{\outoftime}{{\color{red}{$>$ 10min}}}
\newcommand{\env}{\mathcal{E}nv}
\newcommand{\fullsymb}{logicSymb}
\newcommand{\varfullsymb}{logicSymb^\#}
\newcommand{\memmodel}{\varphi}
\newcommand{\condenv}{\varrho}
\newcommand{\varcondenv}{\varrho^\#}
\newcommand{\simplify}{simplify}
\newcommand{\valsimplify}{simplify^+}
\newcommand{\RESPATHconstraint}{\tau}
\newcommand{\nosimplbot}{NoSimp_\bot}
\newcommand{\nosimpltop}{NoSimp_\top}
\newcommand{\symb}{s}
\newcommand{\varsymb}{s^\#}
\newcommand{\mybadmark}{{\color{red}{\bf $\times$}}}
\newcommand{\mycheckmark}{{\color{green}{\bf $\checkmark$}}}
\newcommand{\mywarnmark}{{\color{orange}{\bf $\bullet$}}}
\newcommand{\mymaybemark}{{\color{orange}{\bf $\checkmark$}}}
\newcommand{\rewritingmode}{{\tt rewriting}}
\newcommand{\logicmode}{{\tt logic}}
\newcommand{\hybridmode}{{\tt hybrid}}
\newcommand{\vo}{{\mathcal{O}}}
\newcommand{\vr}{{\mathcal{R}}}
\newcommand{\vm}{{\mathcal{M}}}
\newcommand{\vw}{{\mathcal{W}}}
\newcommand{\vh}{{\mathcal{H}}}
\newcommand{\vx}{{\mathcal{X}}}
\newcommand{\mybadite}{{\color{red}{${{\bf \times}}$}}}
\newcommand{\mybadstore}{{\color{red}{${{\bf \times}}$}}}
\newcommand{\mybadload}{{\color{red}{${{\bf \times}}$}}}
\newcommand{\mybadjmp}{{\color{red}{${{\bf \times}}$}}}
\newcommand{\mybadtout}{{\color{red}{${{\bf \geq 10m}}$}}}
\newcommand{\smalltexttt}[1]{\texttt{\scriptsize #1}}
\newcommand{\tinytexttt}[1]{\texttt{\tiny #1}}


% \newlength{\imagewidth}
% \newlength{\imagescale}
% \DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n} 
% \DeclareFontFamily{U}{MnSymbolA}{}
% \DeclareFontShape{U}{MnSymbolA}{m}{n}{
%   <-6> MnSymbolA5
%   <6-7> MnSymbolA6
%   <7-8> MnSymbolA7
%   <8-9> MnSymbolA8
%   <9-10> MnSymbolA9
%   <10-12> MnSymbolA10
%   <12-> MnSymbolA12}{}
% \DeclareSymbolFont{MnSyA}{U}{MnSymbolA}{m}{n}
% \DeclareMathSymbol{\downlsquigarrow}{\mathrel}{MnSyA}{163}


\makeatletter
\newif\ifmygrid@coordinates
\def\mygrid@def@coordinates(#1,#2)(#3,#4){%
    \def\mygrid@xlo{#1}%
    \def\mygrid@xhi{#3}%
    \def\mygrid@ylo{#2}%
    \def\mygrid@yhi{#4}%
}
\newcommand\DrawGrid[3][]{%
    \draw[/mygrid/steplet line] #2 grid[step=\mygrid@steplet] #3;
    \draw[/mygrid/step line] #2 grid[step=\mygrid@step] #3;
    \mygrid@def@coordinates#2#3%
    \ifmygrid@coordinates%
        \draw[/mygrid/step line]
        \foreach \xpos in {\mygrid@xlo,...,\mygrid@xhi} {%
          (\xpos,\mygrid@ylo) -- ++(0,-3pt)
                              node[anchor=north] {$\xpos$}
        }
        \foreach \ypos in {\mygrid@ylo,...,\mygrid@yhi} {%
          (\mygrid@xlo,\ypos) -- ++(-3pt,0)
                              node[anchor=east] {$\ypos$}
        };
    \fi%
}
\makeatother



\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

\newcommand{\pie}[3][]{
    \begin{scope}[#1]
    \pgfmathsetmacro{\curA}{90}
    \pgfmathsetmacro{\r}{1}
    \def\c{(0,0)}
    \node[pie title] at (90:1.3) {#2};
    \foreach \v/\s in{#3}{
        \pgfmathsetmacro{\deltaA}{\v/100*360}
        \pgfmathsetmacro{\nextA}{\curA + \deltaA}
        \pgfmathsetmacro{\midA}{(\curA+\nextA)/2}
        \path[slice,\s] \c
            -- +(\curA:\r)
            arc (\curA:\nextA:\r)
            -- cycle;
        \pgfmathsetmacro{\d}{max((\deltaA * -(.5/50) + 1) , .5)}
        \begin{pgfonlayer}{foreground}
        \path \c -- node[pos=\d,pie values,values of \s]{$\v\%$} +(\midA:\r);
        \end{pgfonlayer}
        \global\let\curA\nextA
    }
    \end{scope}
}

\newcommand{\legend}[2][]{
    \begin{scope}[#1]
    \path
    \foreach \n/\s in {#2}{
        ++(0,-10pt) node[\s,legend box] {} +(5pt,0) node[legend label] {\n}
    };
    \end{scope}
}

